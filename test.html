<!DOCTYPE html>
<html>
<head>
    <title>è°ƒè¯•æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #000; color: #fff; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #333; border-radius: 8px; }
        button { padding: 10px 20px; margin: 10px; background: #E61636; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .status { margin: 10px 0; }
    </style>
</head>
<body>
    <h1>ğŸ”§ VRChat SnapShare åŠŸèƒ½è°ƒè¯•</h1>
    
    <div class="test-section">
        <h2>1. localStorage æµ‹è¯•</h2>
        <button onclick="testLocalStorage()">æµ‹è¯•localStorage</button>
        <div id="localStorage-status" class="status"></div>
    </div>
    
    <div class="test-section">
        <h2>2. å…¨å±€çŠ¶æ€ç®¡ç†æµ‹è¯•</h2>
        <button onclick="testGlobalState()">æµ‹è¯•å…¨å±€çŠ¶æ€</button>
        <div id="global-status" class="status"></div>
    </div>
    
    <div class="test-section">
        <h2>3. åº”ç”¨è®¿é—®</h2>
        <p>åº”ç”¨åœ°å€: <a href="http://localhost:5176/p0/" target="_blank" style="color: #E61636;">http://localhost:5176/p0/</a></p>
        <button onclick="window.open('http://localhost:5176/p0/', '_blank')">æ‰“å¼€åº”ç”¨</button>
    </div>

    <script>
        function testLocalStorage() {
            const status = document.getElementById('localStorage-status');
            
            // æ¸…ç†æ—§æ•°æ®
            localStorage.removeItem('likedPosts');
            localStorage.removeItem('savedPosts');
            
            // è®¾ç½®æµ‹è¯•æ•°æ®
            const testLiked = ['mock-1', 'mock-2'];
            const testSaved = ['mock-3', 'mock-4'];
            
            localStorage.setItem('likedPosts', JSON.stringify(testLiked));
            localStorage.setItem('savedPosts', JSON.stringify(testSaved));
            
            // éªŒè¯æ•°æ®
            const retrievedLiked = JSON.parse(localStorage.getItem('likedPosts') || '[]');
            const retrievedSaved = JSON.parse(localStorage.getItem('savedPosts') || '[]');
            
            status.innerHTML = `
                <p>âœ… localStorage æµ‹è¯•é€šè¿‡</p>
                <p>è®¾ç½®çš„ç‚¹èµ: ${testLiked.join(', ')}</p>
                <p>è¯»å–çš„ç‚¹èµ: ${retrievedLiked.join(', ')}</p>
                <p>è®¾ç½®çš„æ”¶è—: ${testSaved.join(', ')}</p>
                <p>è¯»å–çš„æ”¶è—: ${retrievedSaved.join(', ')}</p>
            `;
        }
        
        function testGlobalState() {
            const status = document.getElementById('global-status');
            
            // æ¨¡æ‹Ÿå…¨å±€çŠ¶æ€
            try {
                const likedArray = JSON.parse(localStorage.getItem('likedPosts') || '[]');
                const savedArray = JSON.parse(localStorage.getItem('savedPosts') || '[]');
                const globalLiked = new Set(likedArray);
                const globalSaved = new Set(savedArray);
                
                status.innerHTML = `
                    <p>âœ… å…¨å±€çŠ¶æ€ç®¡ç†æµ‹è¯•é€šè¿‡</p>
                    <p>å…¨å±€ç‚¹èµé›†åˆå¤§å°: ${globalLiked.size}</p>
                    <p>å…¨å±€æ”¶è—é›†åˆå¤§å°: ${globalSaved.size}</p>
                    <p>ç‚¹èµåŒ…å«mock-1: ${globalLiked.has('mock-1') ? 'æ˜¯' : 'å¦'}</p>
                    <p>æ”¶è—åŒ…å«mock-3: ${globalSaved.has('mock-3') ? 'æ˜¯' : 'å¦'}</p>
                `;
            } catch (error) {
                status.innerHTML = `<p>âŒ å…¨å±€çŠ¶æ€ç®¡ç†æµ‹è¯•å¤±è´¥: ${error.message}</p>`;
            }
        }
        
        // è‡ªåŠ¨è¿è¡Œåˆå§‹æµ‹è¯•
        window.onload = function() {
            console.log('ğŸš€ è°ƒè¯•é¡µé¢å·²åŠ è½½');
        };
    </script>
</body>
</html>